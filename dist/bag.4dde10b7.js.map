{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCC6HA,SAASC,EAAeC,GACpB,OAAO,IAAIC,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAON,GD5Hd,MAAMO,EAAaC,SAASC,eAAe,cACrCC,EAAeF,SAASC,eAAe,gBACvCE,EAAcH,SAASC,eAAe,eAE5C,IACIG,EADAC,EAAM,GAGV,SAASC,EAAQC,GACb,IAAIC,EAAQ,EACZD,EAAIE,SAAQC,KAqBhB,SAAuBA,GACnB,MAAMC,EAAaX,SAASY,cAAc,MAC1CD,EAAWE,UAAY,iBAEvBF,EAAWG,UAAY,uBAUvBJ,EAAAK,OAAA,6GAG4BL,EAAUM,+CACTN,EAAAO,MAAAD,KAAAE,uDACT3B,EAAAmB,EAAAlB,uHAEMkB,EAAAS,gCAErBC,YAAAT,GAERA,EAAAU,iBAAA,SAAAC,IAEDC,QAAAC,IAAAF,EAAAG,OAAAC,IAGI,WAAAJ,EAAAG,OAAAC,KACIH,QAAAC,IAAA,MA5CRG,eAA6BC,GACzB,MAAMC,EAASxB,EAAIyB,QAAOpB,GAAWA,EAAQgB,KAAOE,IACpDvB,EAAMwB,EAEFzB,SACM2B,EAAAC,kBAAkB3C,EAAA4C,GAAI7B,EAAW8B,IAAKL,ICoFpDF,eAA+BpB,GAC3B4B,aAAaC,QAAQ,MAAOC,KAAKC,UAAU/B,KDlF3CgC,CAAgBV,GAChB9B,EAAWe,UAAY,GACvBR,EAAQuB,GAqCJW,CAA8B9B,EAAAgB,QAtD9Be,CAAc/B,GACdF,GAASkC,SAAShC,EAAQlB,OAAOkB,EAAQS,WAG7CjB,EAAayC,UAAYpD,EAAeiB,KAwD9Ba,iBAAA,SAAAC,uBAGKsB,MAAbxC,EAAkByC,MAAA,wCAGhBC,SAAAC,KAAA,uBAILC,mBAAA3D,EAAA4D,MAAAtB,MAAAuB,mDC8BH,WACI,MAAMC,EAAQhB,aAAaiB,QAAQ,OACnC,OAAOD,EAAQd,KAAKgB,MAAMF,GAAS","sources":["js/bag.js","js/utils/index.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getFirebaseBag, createFirebaseBag, changeCounter } from \"./functions/bag\";\r\nimport { currencyFormat, getMyLocalBag, addProductToBag } from \"./utils\";\r\n\r\n//Get HTML elements\r\nconst bagSection = document.getElementById(\"bagSection\");\r\nconst totalSection = document.getElementById(\"totalSection\");\r\nconst checkoutBtn = document.getElementById(\"checkoutBtn\");\r\n\r\nlet bag = [];\r\nlet userLogged = undefined;\r\n\r\nfunction loadBag(bag) {\r\n    let total = 0;\r\n    bag.forEach(product => {\r\n        renderProduct(product);\r\n        total += parseInt(product.price)*product.counter;\r\n    });\r\n\r\n    totalSection.innerText = currencyFormat(total);\r\n}\r\n\r\nasync function removeProduct(productId) {\r\n    const newBag = bag.filter(product => product.id !== productId);\r\n    bag = newBag;\r\n\r\n    if (userLogged) {\r\n        await createFirebaseBag(db, userLogged.uid, newBag);\r\n    }\r\n\r\n    addProductToBag(newBag);\r\n    bagSection.innerHTML = \"\";\r\n    loadBag(newBag);\r\n}\r\n\r\nfunction renderProduct(product) {\r\n    const bagProduct = document.createElement(\"li\");\r\n    bagProduct.className = \"bag__container\";\r\n\r\n    bagProduct.innerHTML = `\r\n        <img src=\"${product.images[0]}\" alt=\"\" class=\"bag__image\">\r\n        <div class=\"bag__infosection\">\r\n            <h3 class=\"bag__name\">${product.name}</h3>\r\n            <p class=\"bag__info\">${product.color.name.toUpperCase()}</p>\r\n            <p class=\"bag__info\">${currencyFormat(product.price)}</p>\r\n            <button class=\"bag__btn\" id=\"delete\">x</button>\r\n            <p class=\"bag__info\">Quantity: ${product.counter}</p>\r\n        </div>`;\r\n\r\n    bagSection.appendChild(bagProduct);\r\n\r\n    //Delete button\r\n    bagProduct.addEventListener(\"click\", e => {\r\n        console.log(e.target.id);\r\n        //Delete product\r\n        if (e.target.id === \"delete\") {\r\n            console.log(\"go\");\r\n            removeProduct(product.id);\r\n        }\r\n    }); \r\n}\r\n\r\ncheckoutBtn.addEventListener(\"click\", e => {\r\n    e.preventDefault();\r\n    \r\n    //Check if a user is logged before switching pages\r\n    if (userLogged == undefined) {\r\n        alert(\"Login to continue to checkout\");\r\n    } else {\r\n        //If logged in, go to checkout\r\n        window.location.href = \"./checkout.html\";\r\n    }\r\n});\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if (user) {\r\n      // User is signed in, see docs for a list of available properties\r\n      // https://firebase.google.com/docs/reference/js/firebase.User\r\n      userLogged = user;\r\n      bag = await getFirebaseBag(db, userLogged.uid);\r\n    } else {\r\n        bag = getMyLocalBag();\r\n    }\r\n\r\n    loadBag(bag);\r\n});","//Colors from products and their categories\r\nconst colors = [\r\n    {\r\n        category: \"face\",\r\n        palette: [\r\n            {\r\n                name: \"None\",\r\n                hex: \"#ffffff\"\r\n            },\r\n            {\r\n                name: \"1 Cool\",\r\n                hex: \"#f4cfb5\"\r\n            },\r\n            {\r\n                name: \"4 Warm\",\r\n                hex: \"#ecbd8f\"\r\n            },\r\n            {\r\n                name: \"7 Neutral\",\r\n                hex: \"#cd9369\"\r\n            },\r\n            {\r\n                name: \"9 Cool\",\r\n                hex: \"#ca864f\"\r\n            },\r\n            {\r\n                name: \"12.5 Warm\",\r\n                hex: \"#ac6c40\"\r\n            },\r\n            {\r\n                name: \"15 Neutral\",\r\n                hex: \"#754626\"\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        category: \"cheek\",\r\n        palette: [\r\n            {\r\n                name: \"Romance light\",\r\n                hex: \"#c4867c\"\r\n            },\r\n            {\r\n                name: \"Medium bronze\",\r\n                hex: \"#ca906a\"\r\n            },\r\n            {\r\n                name: \"Tan bronze\",\r\n                hex: \"#bc7a51\"\r\n            },\r\n            {\r\n                name: \"Peachgasm\",\r\n                hex: \"#f58e7e\"\r\n            },\r\n            {\r\n                name: \"Pinkgasm\",\r\n                hex: \"#ed7d7e\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"eyes\",\r\n        palette: [\r\n            {\r\n                name: \"Super Black\",\r\n                hex: \"#090909\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dd8d8a\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk Dreams\",\r\n                hex: \"#82362b\"\r\n            },\r\n            {\r\n                name: \"The Sophisticate\",\r\n                hex: \"#ba8973\"\r\n            },\r\n            {\r\n                name: \"Copper Charge\",\r\n                hex: \"#c26f59\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"lips\",\r\n        palette: [\r\n            {\r\n                name: \"Scarlet Spell\",\r\n                hex: \"#8b2833\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dc7b77\"\r\n            },\r\n            {\r\n                name: \"Lost Cherry\",\r\n                hex: \"#fd5d5f\"\r\n            },\r\n            {\r\n                name: \"Love Liberty\",\r\n                hex: \"#aa2937\"\r\n            },\r\n            {\r\n                name: \"Gold\",\r\n                hex: \"#dc7e53\"\r\n            }\r\n        ],\r\n    }\r\n];\r\n\r\nasync function addProductToBag(bag) {\r\n    localStorage.setItem(\"bag\", JSON.stringify(bag));\r\n};\r\n\r\nfunction getMyLocalBag() {\r\n    const myBag = localStorage.getItem(\"bag\");\r\n    return myBag ? JSON.parse(myBag) : [];\r\n}\r\n\r\nfunction deleteMyLocalBag() {\r\n    window.localStorage.removeItem('bag');\r\n}\r\n\r\nfunction currencyFormat(price) {\r\n    return new Intl.NumberFormat(\"en-UK\", {\r\n        style: 'currency',\r\n        currency: 'EUR',\r\n        minimumFractionDigits: 0\r\n    }).format(price);\r\n}\r\n\r\nexport {\r\n    addProductToBag, \r\n    getMyLocalBag,\r\n    deleteMyLocalBag,\r\n    currencyFormat,\r\n    colors\r\n}"],"names":["$6QD2Y","parcelRequire","$d8be5cb91089582e$export$4670d0ed237a9270","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","$9f71fcf6c4afdafb$var$bagSection","document","getElementById","$9f71fcf6c4afdafb$var$totalSection","$9f71fcf6c4afdafb$var$checkoutBtn","$9f71fcf6c4afdafb$var$userLogged","$9f71fcf6c4afdafb$var$bag","$9f71fcf6c4afdafb$var$loadBag","bag","total","forEach","product","bagProduct","createElement","className","innerHTML","images","name","color","toUpperCase","counter","appendChild","addEventListener","e","console","log","target","id","async","productId","newBag","filter","$ba58U","createFirebaseBag","db","uid","localStorage","setItem","JSON","stringify","$d8be5cb91089582e$export$c905b8db0449b9bb","$9f71fcf6c4afdafb$var$removeProduct","$9f71fcf6c4afdafb$var$renderProduct","parseInt","innerText","undefined","alert","location","href","onAuthStateChanged","auth","user","myBag","getItem","parse"],"version":3,"file":"bag.4dde10b7.js.map"}