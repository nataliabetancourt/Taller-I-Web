var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},t=e.parcelRequire0a97;null==t&&((t=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){a[e]=n},e.parcelRequire0a97=t);var o=t("6QD2Y"),r=t("1tHc5"),i=t("ba58U");function l(e){return new Intl.NumberFormat("en-UK",{style:"currency",currency:"EUR",minimumFractionDigits:0}).format(e)}var d=t("etBjH");const c=document.getElementById("checkoutForm"),s=document.getElementById("checkoutOrder"),u=document.getElementById("checkoutTotal"),p=document.getElementById("shippingPrice"),m=document.getElementById("popup");let f,g=[],v=[],h=0,y=0;function T(e){e.forEach((e=>{const{name:n,price:a}=e,t={name:n,price:a};v.push(t),y+=parseInt(e.price)*e.counter,function(e){const n=document.createElement("div");n.className="order",n.innerHTML=`\n        <img src="${e.images[0]}" alt="" class="order__img">\n        <div class="order__infosection">\n            <h3 class="order__name">${e.name}</h3>\n            <p class="order__info">${e.color.name.toUpperCase()}</p>\n            <p class="order__info">${l(e.price)}</p>\n        </div>`,s.appendChild(n)}(e),u.innerText=l(y)}))}c.addEventListener("change",(e=>{finalTotal=y,"standard"==c.shipping.value&&(h=6),"expedited"==c.shipping.value&&(h=10),"overnight"==c.shipping.value&&(h=14),finalTotal=y+h,p.innerHTML="Shipping price: "+l(h),u.innerText=finalTotal})),c.addEventListener("submit",(async e=>{e.preventDefault(),console.log("clicked");const n={userInfo:{firstname:c.firstname.value,lastname:c.lastname.value,address:c.address.value,city:c.city.value,cellphone:c.cell.value},paymentInfo:{shipping:c.shipping.value,cardNum:c.card.value,expiration:c.expiration.value,code:c.code.value},order:v,finalTotal:finalTotal};await async function(e,n,a){try{await d.setDoc(d.doc(e,"orders",a),{order:n}),console.log("order added")}catch(e){console.log(e)}}(o.db,n,f.uid),m.classList.add("popup--open"),i.deleteFromBag(o.db,f.uid),window.localStorage.removeItem("bag")})),r.onAuthStateChanged(o.auth,(async e=>{e&&(f=e,g=await i.getFirebaseBag(o.db,f.uid)),T(g)}));
//# sourceMappingURL=checkout.4cd248f6.js.map
