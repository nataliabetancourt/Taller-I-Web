{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCC6HA,SAASC,EAAeC,GACpB,OAAO,IAAIC,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAON,GClId,IAAAO,EAAAT,EAAA,SFOA,MAAMU,EAAeC,SAASC,eAAe,gBACvCC,EAAeF,SAASC,eAAe,iBACvCE,EAAgBH,SAASC,eAAe,iBACxCG,EAAeJ,SAASC,eAAe,iBACvCI,EAAQL,SAASC,eAAe,SAEtC,IAEIK,EAFAC,EAAM,GACNC,EAAQ,GAERC,EAAgB,EAChBC,EAAQ,EAEZ,SAASC,EAAQC,GACbA,EAAIC,SAAQC,IACR,MArBRC,KAqBgBA,EArBhBxB,MAqBsBA,GAAUuB,EAClBE,EAAe,MACjBD,QACAxB,GAIJiB,EAAMS,KAAKD,GAGXN,GAASQ,SAASJ,EAAQvB,OAAOuB,EAAQK,QAOjD,SAAuBL,GACnB,MAAME,EAAehB,SAASoB,cAAc,OAC5CJ,EAAaK,UAAY,QAEzBL,EAAaM,UAAY,uBAQzBR,EAAAS,OAAA,iHAGST,EAAAC,iDACQD,EAAAU,MAAMT,KAAAU,yDAEnBnC,EACAwB,EAAAvB,6BAOJW,EAAIwB,YAAqBV,GA/BrBW,CAAcb,GACdX,EAAcyB,UAAYtC,EAAeoB,QAmChCmB,iBAAM,UAAAC,IACnB,IAAAC,EAAArB,EAC0B,YAA1BX,EAAciC,SAAYC,QAAWxB,EAAA,GACtC,aAAAV,EAAAiC,SAAAC,QAAAxB,EAAA,IAEmC,aAAtCV,EAAaiC,SAAiBC,QAAuBxB,EAAA,IAEjDsB,EAAYrB,EAAWD,EAEvBL,EAAyBkB,UAAA,mBAAAhC,EAAAmB,GACzBN,EAAkByB,UAAAG,OAEFF,iBAAA,UAAoBK,MAAOJ,IAC3CA,EAAAK,iBACAC,QAAMC,IAAA,WAEN,MA6BAC,EAAA,CACAC,SAnBC,CAEDC,UAbgBzC,EAAayC,UAAWP,MAcxCQ,SAbgB1C,EAAG0C,SAAaR,cACnBlC,EAAa2C,QAAWT,WAErClC,EAAmB4C,KAAAV,gBACFlC,EAAA6C,KAAAX,OA2BjBY,YAXA,CACAb,SAhBGjC,EAASiC,SAAAC,cACTlC,EAAQ+C,KAAAb,iBACRlC,EAAOgD,WAAAd,WACPlC,EAAIiD,KAAAf,OAwBPgB,MAAAzC,EACAuB,WAAAA,kBErHJG,eAAyBgB,EAAID,EAAOE,GAChC,UACUrD,EAAAsD,OAAOtD,EAAAuD,IAAIH,EAAI,SAAUC,GAAS,OACpCF,IAEJb,QAAQC,IAAI,eACd,MAAOP,GACLM,QAAQC,IAAIP,IFkHjBwB,CAAAlE,EAAA8D,GAAAZ,EAAAhC,EAAAiD,KAGClD,EAAUmD,UAAAC,IAAA,iBAERC,cAAAtE,EAA8D8D,GAAA5C,EAAAiD,KCNhEI,OAAOC,aAAaC,WAAW,YDS9BC,mBAAA1E,EAAA2E,MAAA7B,MAAA8B,IAEDA","sources":["js/checkout.js","js/utils/index.js","js/functions/checkout.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { deleteFromBag, getFirebaseBag } from \"./functions/bag\";\r\nimport { currencyFormat, deleteMyLocalBag } from \"./utils\";\r\nimport { addOrder } from \"./functions/checkout\";\r\n\r\n//Call html elements\r\nconst checkoutForm = document.getElementById(\"checkoutForm\");\r\nconst orderSection = document.getElementById(\"checkoutOrder\");\r\nconst checkoutTotal = document.getElementById(\"checkoutTotal\");\r\nconst shippingText = document.getElementById(\"shippingPrice\");\r\nconst popup = document.getElementById(\"popup\");\r\n\r\nlet bag = [];\r\nlet order = [];\r\nlet userLogged = undefined;\r\nlet shippingPrice = 0;\r\nlet total = 0;\r\n\r\nfunction loadBag(bag) {\r\n    bag.forEach(product => {\r\n        const { name, price } = product;\r\n        const orderProduct = {\r\n            name,\r\n            price\r\n        }\r\n\r\n        //Add products in bag to order and push to array\r\n        order.push(orderProduct);\r\n\r\n        //Add total of products\r\n        total += parseInt(product.price)*product.counter;\r\n\r\n        renderProduct(product);\r\n        checkoutTotal.innerText = currencyFormat(total);\r\n    });\r\n}\r\n\r\nfunction renderProduct(product) {\r\n    const orderProduct = document.createElement(\"div\");\r\n    orderProduct.className = \"order\";\r\n\r\n    orderProduct.innerHTML = `\r\n        <img src=\"${product.images[0]}\" alt=\"\" class=\"order__img\">\r\n        <div class=\"order__infosection\">\r\n            <h3 class=\"order__name\">${product.name}</h3>\r\n            <p class=\"order__info\">${product.color.name.toUpperCase()}</p>\r\n            <p class=\"order__info\">${currencyFormat(product.price)}</p>\r\n        </div>`;\r\n\r\n    orderSection.appendChild(orderProduct);\r\n}\r\n\r\ncheckoutForm.addEventListener(\"change\", e => {\r\n    let finalTotal = total;\r\n\r\n    if (checkoutForm.shipping.value == \"standard\") {\r\n        shippingPrice = 6;\r\n    }\r\n\r\n    if (checkoutForm.shipping.value == \"expedited\") {\r\n        shippingPrice = 10;\r\n    }\r\n\r\n    if (checkoutForm.shipping.value == \"overnight\") {\r\n        shippingPrice = 14;\r\n    }\r\n\r\n    //Final order total based on shipping\r\n    finalTotal = total+shippingPrice;\r\n    shippingText.innerHTML = \"Shipping price: \" + currencyFormat(shippingPrice);\r\n    checkoutTotal.innerText = finalTotal;\r\n});\r\n\r\ncheckoutForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"clicked\");\r\n\r\n    //All the checkout inputs\r\n    const firstname = checkoutForm.firstname.value;\r\n    const lastname = checkoutForm.lastname.value;\r\n    const address = checkoutForm.address.value;\r\n    const city = checkoutForm.city.value;\r\n    const cellphone = checkoutForm.cell.value;\r\n    const shipping = checkoutForm.shipping.value;\r\n    const cardNum = checkoutForm.card.value;\r\n    const expiration = checkoutForm.expiration.value;\r\n    const code = checkoutForm.code.value;\r\n\r\n    //Create user array\r\n    const userInfo = {\r\n       firstname,\r\n       lastname,\r\n       address,\r\n       city, \r\n       cellphone \r\n    }\r\n\r\n    //Create payment array\r\n    const paymentInfo = {\r\n        shipping, \r\n        cardNum,\r\n        expiration,\r\n        code\r\n    }\r\n\r\n    //Create order object\r\n    const orderComplete = {\r\n        userInfo,\r\n        paymentInfo,\r\n        order,\r\n        finalTotal\r\n    }\r\n\r\n    //Add order to firestore database\r\n    await addOrder(db, orderComplete, userLogged.uid);\r\n\r\n    //Show popup\r\n    popup.classList.add('popup--open');\r\n    //Delete bag from firestore and local storage\r\n    deleteFromBag(db, userLogged.uid);\r\n    deleteMyLocalBag();\r\n\r\n});\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if (user) {\r\n      // User is signed in, see docs for a list of available properties\r\n      // https://firebase.google.com/docs/reference/js/firebase.User\r\n      userLogged = user;\r\n      bag = await getFirebaseBag(db, userLogged.uid);\r\n    }\r\n\r\n    loadBag(bag);\r\n});","//Colors from products and their categories\r\nconst colors = [\r\n    {\r\n        category: \"face\",\r\n        palette: [\r\n            {\r\n                name: \"None\",\r\n                hex: \"#ffffff\"\r\n            },\r\n            {\r\n                name: \"1 Cool\",\r\n                hex: \"#f4cfb5\"\r\n            },\r\n            {\r\n                name: \"4 Warm\",\r\n                hex: \"#ecbd8f\"\r\n            },\r\n            {\r\n                name: \"7 Neutral\",\r\n                hex: \"#cd9369\"\r\n            },\r\n            {\r\n                name: \"9 Cool\",\r\n                hex: \"#ca864f\"\r\n            },\r\n            {\r\n                name: \"12.5 Warm\",\r\n                hex: \"#ac6c40\"\r\n            },\r\n            {\r\n                name: \"15 Neutral\",\r\n                hex: \"#754626\"\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        category: \"cheek\",\r\n        palette: [\r\n            {\r\n                name: \"Romance light\",\r\n                hex: \"#c4867c\"\r\n            },\r\n            {\r\n                name: \"Medium bronze\",\r\n                hex: \"#ca906a\"\r\n            },\r\n            {\r\n                name: \"Tan bronze\",\r\n                hex: \"#bc7a51\"\r\n            },\r\n            {\r\n                name: \"Peachgasm\",\r\n                hex: \"#f58e7e\"\r\n            },\r\n            {\r\n                name: \"Pinkgasm\",\r\n                hex: \"#ed7d7e\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"eyes\",\r\n        palette: [\r\n            {\r\n                name: \"Super Black\",\r\n                hex: \"#090909\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dd8d8a\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk Dreams\",\r\n                hex: \"#82362b\"\r\n            },\r\n            {\r\n                name: \"The Sophisticate\",\r\n                hex: \"#ba8973\"\r\n            },\r\n            {\r\n                name: \"Copper Charge\",\r\n                hex: \"#c26f59\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"lips\",\r\n        palette: [\r\n            {\r\n                name: \"Scarlet Spell\",\r\n                hex: \"#8b2833\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dc7b77\"\r\n            },\r\n            {\r\n                name: \"Lost Cherry\",\r\n                hex: \"#fd5d5f\"\r\n            },\r\n            {\r\n                name: \"Love Liberty\",\r\n                hex: \"#aa2937\"\r\n            },\r\n            {\r\n                name: \"Gold\",\r\n                hex: \"#dc7e53\"\r\n            }\r\n        ],\r\n    }\r\n];\r\n\r\nasync function addProductToBag(bag) {\r\n    localStorage.setItem(\"bag\", JSON.stringify(bag));\r\n};\r\n\r\nfunction getMyLocalBag() {\r\n    const myBag = localStorage.getItem(\"bag\");\r\n    return myBag ? JSON.parse(myBag) : [];\r\n}\r\n\r\nfunction deleteMyLocalBag() {\r\n    window.localStorage.removeItem('bag');\r\n}\r\n\r\nfunction currencyFormat(price) {\r\n    return new Intl.NumberFormat(\"en-UK\", {\r\n        style: 'currency',\r\n        currency: 'EUR',\r\n        minimumFractionDigits: 0\r\n    }).format(price);\r\n}\r\n\r\nexport {\r\n    addProductToBag, \r\n    getMyLocalBag,\r\n    deleteMyLocalBag,\r\n    currencyFormat,\r\n    colors\r\n}","import { setDoc, doc } from \"firebase/firestore\";\r\n\r\nasync function addOrder (db, order, userId) {\r\n    try {\r\n        await setDoc(doc(db, \"orders\", userId), {\r\n            order\r\n        });\r\n        console.log(\"order added\");\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport {\r\n    addOrder\r\n}"],"names":["$6QD2Y","parcelRequire","$d8be5cb91089582e$export$4670d0ed237a9270","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","$etBjH","$0312381fa325a602$var$checkoutForm","document","getElementById","$0312381fa325a602$var$orderSection","$0312381fa325a602$var$checkoutTotal","$0312381fa325a602$var$shippingText","$0312381fa325a602$var$popup","$0312381fa325a602$var$userLogged","$0312381fa325a602$var$bag","$0312381fa325a602$var$order","$0312381fa325a602$var$shippingPrice","$0312381fa325a602$var$total","$0312381fa325a602$var$loadBag","bag","forEach","product","name","orderProduct","push","parseInt","counter","createElement","className","innerHTML","images","color","toUpperCase","appendChild","$0312381fa325a602$var$renderProduct","innerText","addEventListener","e","finalTotal","shipping","value","async","preventDefault","console","log","orderComplete","userInfo","firstname","lastname","address","city","cell","paymentInfo","card","expiration","code","order","db","userId","setDoc","doc","$11a7ccff5f3436d3$export$e0b7ffbb35a861bd","uid","classList","add","deleteFromBag","window","localStorage","removeItem","onAuthStateChanged","auth","user"],"version":3,"file":"checkout.a0ad7385.js.map"}