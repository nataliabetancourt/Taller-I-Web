{"mappings":"oeACA,IAAAA,EAAAC,EAAA,gDCAA,MAAMC,EAAS,CACX,CACIC,SAAU,OACVC,QAAS,CACL,CACIC,KAAM,OACNC,IAAK,WAET,CACID,KAAM,SACNC,IAAK,WAET,CACID,KAAM,SACNC,IAAK,WAET,CACID,KAAM,YACNC,IAAK,WAET,CACID,KAAM,SACNC,IAAK,WAET,CACID,KAAM,YACNC,IAAK,WAET,CACID,KAAM,aACNC,IAAK,aAIjB,CACIH,SAAU,QACVC,QAAS,CACL,CACIC,KAAM,gBACNC,IAAK,WAET,CACID,KAAM,gBACNC,IAAK,WAET,CACID,KAAM,aACNC,IAAK,WAET,CACID,KAAM,YACNC,IAAK,WAET,CACID,KAAM,WACNC,IAAK,aAIjB,CACIH,SAAU,OACVC,QAAS,CACL,CACIC,KAAM,cACNC,IAAK,WAET,CACID,KAAM,cACNC,IAAK,WAET,CACID,KAAM,qBACNC,IAAK,WAET,CACID,KAAM,mBACNC,IAAK,WAET,CACID,KAAM,gBACNC,IAAK,aAIjB,CACIH,SAAU,OACVC,QAAS,CACL,CACIC,KAAM,gBACNC,IAAK,WAET,CACID,KAAM,cACNC,IAAK,WAET,CACID,KAAM,cACNC,IAAK,WAET,CACID,KAAM,eACNC,IAAK,WAET,CACID,KAAM,OACNC,IAAK,cDlGrB,MAAMC,EAAiBC,SAASC,eAAe,kBACzCC,EAAiBF,SAASC,eAAe,YACzCE,EAAcH,SAASC,eAAe,SACtCG,EAAcJ,SAASC,eAAe,SACtCI,EAAmBL,SAASC,eAAe,SAC3CK,EAAqBN,SAASC,eAAe,UAC7CM,EAAkBP,SAASC,eAAe,QAEhD,IAEIO,EACAC,EAHAC,EAAW,GACXC,EAAM,GAkCV,SAASC,EAAcC,GACnB,MAAMC,EAAUd,SAASe,cAAc,KAhB3C,IAAqBC,EAiBjBF,EAAQG,UAAY,WAjBHD,EAoBLH,EAAKG,QAlBJ,EACTP,EAAQ,uJACFO,EAAS,EACfP,EAAQ,uJACDO,EAAS,EAChBP,EAAQ,uJACDO,EAAS,EAChBP,EAAQ,uJACDO,EAAS,IAChBP,EAAQ,wJAYZK,EAAQI,aAAa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","sources":["js/shop.js","js/utils/index.js"],"sourcesContent":["//Import necessary functions\r\nimport { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { createFirebaseBag, getFirebaseBag } from \"./functions/bag\";\r\nimport { getAllProducts } from \"./functions/getProduct\";\r\nimport { addProductToBag, getMyLocalBag, currencyFormat, colors } from \"./utils\";\r\n\r\n//Get HTML elements\r\nconst productSection = document.getElementById(\"productSection\");\r\nconst categoryFilter = document.getElementById(\"category\");\r\nconst stockFilter = document.getElementById(\"stock\");\r\nconst colorFilter = document.getElementById(\"color\");\r\nconst orderPriceFilter = document.getElementById(\"price\");\r\nconst orderRatingsFilter = document.getElementById(\"rating\");\r\nconst orderNameFilter = document.getElementById(\"name\");\r\n\r\nlet products = [];\r\nlet bag = [];\r\nlet userLogged = undefined;\r\nlet stars = undefined;\r\n\r\n//Start empty array for product colors \r\nfilteredColor = [];\r\n\r\nasync function loadProducts() {\r\n    //Get products from database\r\n    const firebaseProducts = await getAllProducts(db);\r\n    productSection.innerHTML = \"\";\r\n    //Go through product array and render each product\r\n    firebaseProducts.forEach(product => {\r\n        renderProduct(product);\r\n    });\r\n\r\n    products = firebaseProducts;\r\n}\r\n\r\nfunction showRatings(rating) {\r\n    //Check if rating is 5\r\n    if (rating > 4) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F5star.png?alt=media&token=0e7dfd68-9a75-44a2-b477-f2cce7fc328e\";\r\n    } else if(rating > 3) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F4star.png?alt=media&token=f49f353d-a4c2-4bbb-b52f-bf7c3b8ad795\";\r\n    } else if (rating > 2) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F3star.png?alt=media&token=bfe458d0-3bd8-48b1-a5c8-f4bc64198184\";\r\n    } else if (rating > 1) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F2star.png?alt=media&token=b0ed27fc-5c7b-4c16-9a49-fbd26011c043\";\r\n    } else if (rating > 0) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F1star.png?alt=media&token=bcb5f492-8e45-4e5a-b739-502407478091\";\r\n    }\r\n}\r\n\r\nfunction renderProduct(item) {\r\n    const product = document.createElement(\"a\");\r\n    product.className = \"product\";\r\n\r\n    //Get rating image for each product\r\n    showRatings(item.rating);\r\n    \r\n    //Set link for each product\r\n    product.setAttribute(\"href\", `./product.html?id=${item.id}`);\r\n\r\n    //Check for images, if there are no images, use placeholder\r\n    const coverImg = item.images.length ? item.images[0] : \"https://socialistmodernism.com/wp-content/uploads/2017/07/placeholder-image.png?w=640\";\r\n\r\n    //Create product box\r\n    product.innerHTML = `\r\n        <img src=\"${coverImg}\" alt=\"${item.name}\" class=\"product__img\">\r\n        <div>\r\n            <h2 class=\"product__name\">${item.name}</h2>\r\n            <h3 class=\"product__color\">${item.color.name.toUpperCase()}</h3>\r\n            <div class=\"product__bottom\">\r\n                <h3 class=\"product__price\">${currencyFormat(item.price)}</h3>\r\n                <img src=\"${stars}\" class=\"product__rating\">\r\n            </div>\r\n            <button class=\"product__bag\">ADD TO BAG</button>\r\n        </div>`;\r\n\r\n    productSection.appendChild(product);\r\n\r\n    //Add to bag button\r\n    const addToBagBtn = product.querySelector(\".product__bag\");\r\n\r\n    addToBagBtn.addEventListener(\"click\", async (e) => {\r\n        e.preventDefault(); //Avoid allowing the link to change screens\r\n\r\n        const currentProductIsAdded = bag.find(product => product.id === item.id);\r\n\r\n        const productToAdd = {\r\n            ...item,\r\n            counter: (currentProductIsAdded) ? currentProductIsAdded.counter + 1 : 1,\r\n        }\r\n\r\n        if (currentProductIsAdded) {\r\n            const indexElement = bag.findIndex(product => product.id === item.id);\r\n            bag[indexElement] = productToAdd;\r\n        } else {\r\n            bag.push(productToAdd);\r\n        }\r\n \r\n        addProductToBag(bag);\r\n\r\n        if (userLogged) {\r\n            await createFirebaseBag(db, userLogged.uid, bag);\r\n        }\r\n    });\r\n}\r\n\r\n//Set color filter with options\r\nfunction colorSelector() {\r\n    const productCategory = categoryFilter.value;\r\n\r\n    //Get palette from category array\r\n    const { palette } = colors.find(color => color.category === productCategory);\r\n\r\n    //Create new array with html elements, based on color information\r\n    const colorsOption = palette.map((color) => {\r\n        return `<option value=\"${color.hex}\">${color.name}</option>`\r\n    });\r\n\r\n    //Set select with options\r\n    colorFilter.innerHTML = colorsOption;\r\n}\r\n\r\nfunction renderArray(array) {\r\n    //Paint new array of products based on filter\r\n    productSection.innerHTML = \"\";\r\n    array.forEach(product => {\r\n        renderProduct(product);\r\n    });\r\n}\r\n \r\n//Filter by category\r\nfunction filterBy() {\r\n    const newCategory = categoryFilter.value;\r\n    const newStock = stockFilter.value;\r\n\r\n    const newPriceOrder = orderPriceFilter.value;\r\n    const newRatingsOrder = orderRatingsFilter.value;\r\n    const newAlphaOrder = orderNameFilter.value;\r\n\r\n    let filteredProducts = [];\r\n\r\n    //Check if selected category option has a value\r\n    if (newCategory !== \"\") {\r\n        //Filter for category\r\n        filteredProducts = products.filter((product) => product.category === newCategory);\r\n\r\n    } else {\r\n        filteredProducts = products;\r\n    }\r\n\r\n    //Check if selected stock option has a value\r\n    if (newStock === \"Stock\") {\r\n        filteredProducts = products.filter((product) => product.stock > 0);\r\n    } if (newStock === \"None\") {\r\n        filteredProducts = products.filter((product) => product.stock <= 0);\r\n    } \r\n\r\n    //Check if price is going up or down \r\n    if (newPriceOrder == \"up\") {\r\n        filteredProducts = filteredProducts.sort((a, b) => a.price - b.price);\r\n    } \r\n\r\n    if (newPriceOrder == \"down\") {\r\n        filteredProducts = filteredProducts.sort((a, b) => b.price - a.price);\r\n    } \r\n\r\n    //Check if ratings are going up or down \r\n    if (newRatingsOrder == \"up\") {\r\n        filteredProducts = filteredProducts.sort((a, b) => a.rating - b.rating);\r\n    } \r\n\r\n    if (newRatingsOrder == \"down\") {\r\n        filteredProducts = filteredProducts.sort((a, b) => b.rating - a.rating);\r\n    } \r\n\r\n    //Check what order the user wishes for (a to z, z to a)\r\n    if (newAlphaOrder == \"down\") {\r\n        filteredProducts.sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase()));\r\n    }\r\n\r\n    if (newAlphaOrder == \"up\") {\r\n        filteredProducts.sort((a, b) => b.name.toLowerCase().localeCompare(a.name.toLowerCase()));\r\n    }\r\n\r\n    renderArray(filteredProducts);\r\n}\r\n\r\ncategoryFilter.addEventListener(\"change\", e => {\r\n    filterBy();\r\n\r\n    //Show colors based on category\r\n    colorSelector();\r\n});\r\n\r\nstockFilter.addEventListener(\"change\", e => {\r\n    filterBy();\r\n});\r\n\r\ncolorFilter.addEventListener(\"change\", e => {\r\n    filteredProducts = products.filter((product) => product.color.hex === colorFilter.value);\r\n    renderArray(filteredProducts);\r\n});\r\n\r\norderPriceFilter.addEventListener(\"change\", e => {\r\n    filterBy();\r\n});\r\n\r\norderRatingsFilter.addEventListener(\"change\", e => {\r\n    filterBy();\r\n});\r\n\r\norderNameFilter.addEventListener(\"change\", e => {\r\n    filterBy();\r\n});\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if (user) {\r\n      // User is signed in, see docs for a list of available properties\r\n      // https://firebase.google.com/docs/reference/js/firebase.User\r\n      userLogged = user;\r\n      bag = await getFirebaseBag(db, userLogged.uid);\r\n    } else {\r\n        bag = getMyLocalBag();\r\n    }\r\n\r\n    loadProducts();\r\n});\r\n\r\n","//Colors from products and their categories\r\nconst colors = [\r\n    {\r\n        category: \"face\",\r\n        palette: [\r\n            {\r\n                name: \"None\",\r\n                hex: \"#ffffff\"\r\n            },\r\n            {\r\n                name: \"1 Cool\",\r\n                hex: \"#f4cfb5\"\r\n            },\r\n            {\r\n                name: \"4 Warm\",\r\n                hex: \"#ecbd8f\"\r\n            },\r\n            {\r\n                name: \"7 Neutral\",\r\n                hex: \"#cd9369\"\r\n            },\r\n            {\r\n                name: \"9 Cool\",\r\n                hex: \"#ca864f\"\r\n            },\r\n            {\r\n                name: \"12.5 Warm\",\r\n                hex: \"#ac6c40\"\r\n            },\r\n            {\r\n                name: \"15 Neutral\",\r\n                hex: \"#754626\"\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        category: \"cheek\",\r\n        palette: [\r\n            {\r\n                name: \"Romance light\",\r\n                hex: \"#c4867c\"\r\n            },\r\n            {\r\n                name: \"Medium bronze\",\r\n                hex: \"#ca906a\"\r\n            },\r\n            {\r\n                name: \"Tan bronze\",\r\n                hex: \"#bc7a51\"\r\n            },\r\n            {\r\n                name: \"Peachgasm\",\r\n                hex: \"#f58e7e\"\r\n            },\r\n            {\r\n                name: \"Pinkgasm\",\r\n                hex: \"#ed7d7e\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"eyes\",\r\n        palette: [\r\n            {\r\n                name: \"Super Black\",\r\n                hex: \"#090909\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dd8d8a\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk Dreams\",\r\n                hex: \"#82362b\"\r\n            },\r\n            {\r\n                name: \"The Sophisticate\",\r\n                hex: \"#ba8973\"\r\n            },\r\n            {\r\n                name: \"Copper Charge\",\r\n                hex: \"#c26f59\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"lips\",\r\n        palette: [\r\n            {\r\n                name: \"Scarlet Spell\",\r\n                hex: \"#8b2833\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dc7b77\"\r\n            },\r\n            {\r\n                name: \"Lost Cherry\",\r\n                hex: \"#fd5d5f\"\r\n            },\r\n            {\r\n                name: \"Love Liberty\",\r\n                hex: \"#aa2937\"\r\n            },\r\n            {\r\n                name: \"Gold\",\r\n                hex: \"#dc7e53\"\r\n            }\r\n        ],\r\n    }\r\n];\r\n\r\nasync function addProductToBag(bag) {\r\n    localStorage.setItem(\"bag\", JSON.stringify(bag));\r\n};\r\n\r\nfunction getMyLocalBag() {\r\n    const myBag = localStorage.getItem(\"bag\");\r\n    return myBag ? JSON.parse(myBag) : [];\r\n}\r\n\r\nfunction deleteMyLocalBag() {\r\n    window.localStorage.removeItem('bag');\r\n}\r\n\r\nfunction currencyFormat(price) {\r\n    return new Intl.NumberFormat(\"en-UK\", {\r\n        style: 'currency',\r\n        currency: 'EUR',\r\n        minimumFractionDigits: 0\r\n    }).format(price);\r\n}\r\n\r\nexport {\r\n    addProductToBag, \r\n    getMyLocalBag,\r\n    deleteMyLocalBag,\r\n    currencyFormat,\r\n    colors\r\n}"],"names":["$6QD2Y","parcelRequire","$d8be5cb91089582e$export$8f45430ccf837300","category","palette","name","hex","$1ddef344fc51d0a0$var$productSection","document","getElementById","$1ddef344fc51d0a0$var$categoryFilter","$1ddef344fc51d0a0$var$stockFilter","$1ddef344fc51d0a0$var$colorFilter","$1ddef344fc51d0a0$var$orderPriceFilter","$1ddef344fc51d0a0$var$orderRatingsFilter","$1ddef344fc51d0a0$var$orderNameFilter","$1ddef344fc51d0a0$var$userLogged","$1ddef344fc51d0a0$var$stars","$1ddef344fc51d0a0$var$products","$1ddef344fc51d0a0$var$bag","$1ddef344fc51d0a0$var$renderProduct","item","product1","createElement","rating","className","setAttribute","id","coverImg","images","length","price","innerHTML","color","toUpperCase","Intl","NumberFormat","style","currency","minimumFractionDigits","format","appendChild","querySelector","addEventListener","async","e","currentProductIsAdded","find","product","productToAdd","counter","indexElement","findIndex","push","bag","localStorage","setItem","JSON","stringify","$d8be5cb91089582e$export$c905b8db0449b9bb","$ba58U","createFirebaseBag","db","uid","$1ddef344fc51d0a0$var$renderArray","array","forEach","$1ddef344fc51d0a0$var$filterBy","newCategory","value","newStock","newPriceOrder","newRatingsOrder","newAlphaOrder","filteredProducts","filter","stock","sort","a","b","toLowerCase","localeCompare","filteredColor","productCategory","colorsOption","map","$1ddef344fc51d0a0$var$colorSelector","myBag","getItem","parse","firebaseProducts","$5nbHs","getAllProducts"],"version":3,"file":"shop.b2223c2d.js.map"}