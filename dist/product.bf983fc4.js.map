{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,oDAOA,MAAMC,EAAcC,SAASC,eAAe,eACtCC,EAAgBF,SAASC,eAAe,iBAE9C,IAAIE,EACAC,EAAM,GASVC,eAAeC,IACX,MAAMC,EARV,SAAkBC,GACd,MAAMC,EAAMC,OAAOC,SAASC,OAG5B,OAFqB,IAAIC,gBAAgBJ,GACVK,IAAIN,GAKjBO,CAAS,OA8B/B,SAAuBC,GAEnBd,EAAce,UAAY,sCAM1BD,EAAAE,OAAA,0DAvBiBC,EAmCbH,EAAAG,YAjCAA,EAAS,EACTC,MAAQ,uJACFD,EAAS,EACfC,MAAQ,uJACDD,EAAS,EAChBC,MAAQ,uJACDD,EAAS,EAChBC,MAAQ,uJACDD,EAAS,IAChBC,MAAQ,yJA4BZrB,EAAwBkB,UAAc,uCAEtCD,EAAAK,iDACgBL,EAAAM,MAAAD,KAAAE,0DC+CpB,SAAwBC,GACpB,OAAO,IAAIC,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAON,GDlDuBO,CAAaf,EAAAQ,wDACZR,EAAAgB,sCAAyDZ,8FAGhFF,OAAOe,OAAA,YAgCuBf,GAGzC,MAAAgB,EAAYlC,SAAAmC,cAA0B,SAC9BC,UAAS,qBAIdC,SAAAC,IACNJ,EAAAjB,WAAA,kBAAAqB,eAGGpC,EAAUqC,YAAAL,SAERM,EAAAxC,SAAAC,eAAA,WACAD,SAAAyC,cAAiB,qBACjBC,iBAAG,SAASC,IAGV,QAAAA,EAAAC,OAAAC,SAAML,EAAAM,aAAA,MAAAH,EAAAC,OAAAG,eAnDQC,CAAAhC,EAAAE,QAhDtB,IAAqBC,QAkDZ8B,EAAAjD,SAAAyC,cAAA,oCAG4E,SAAApC,MAAAsC,UACzEO,EAAI9C,EAAgB+C,MAAaC,GAAAA,EAAAC,KAAArC,EAAAqC,KAKrCC,EAAA,IAEItC,EAGLuC,QAAAL,EAAAA,EAAAK,QAAA,EAAA,GAIP,GAASL,EAAA,CACL,MAAAM,EAAuBpD,EAAAqD,WAAAC,GAAAA,EAAAL,IAAAK,EAAAL,KAEfjD,EAAYoD,GAAmBF,OAEhClD,EAAiBuD,KAAAL,ICG5BjD,eAA+BuD,GAC3BC,aAAaC,QAAQ,MAAOC,KAAKC,UAAUJ,IDHvCK,CAAuC7D,GACxCD,SAAA+D,EAAAC,kBAAAtE,EAAAuE,GAAAjE,EAAAkE,IAAAjE,MA9EHkE,CANgB,UAHGC,EAAAC,iBAAiB3E,EAAAuE,GAAI7D,GAKpC8C,GAAI9C,0FCuFZ,WACI,MAAMkE,EAAQZ,aAAaa,QAAQ,OACnC,OAAOD,EAAQV,KAAKY,MAAMF,GAAS","sources":["js/product.js","js/utils/index.js"],"sourcesContent":["import { db, auth } from \"./app\"; \r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getSingleProduct } from \"./functions/getProduct\";\r\nimport { addProductToBag, currencyFormat, getMyLocalBag } from \"./utils\";\r\nimport { createFirebaseBag, getFirebaseBag } from \"./functions/bag\";   \r\n\r\n//Get HTML elements\r\nconst productInfo = document.getElementById(\"productInfo\");\r\nconst productAssets = document.getElementById(\"productAssets\");\r\n\r\nlet userLogged = undefined;\r\nlet bag = [];\r\n\r\nfunction getParam(param) {\r\n    const url = window.location.search;\r\n    const searchParams = new URLSearchParams(url);\r\n    const productId = searchParams.get(param);\r\n    return productId;\r\n}\r\n\r\nasync function loadProduct() {\r\n    const productId = getParam(\"id\"); // http://localhost:1234/product.html?id=TXQ9Wf1GIoAOJLkIEMYo&age=20\r\n\r\n    //Get data from database\r\n    const data = await getSingleProduct(db, productId);\r\n\r\n    //Create object with data and id\r\n    const product = {\r\n        ...data,\r\n        id: productId, // docSnap.id,\r\n    }\r\n\r\n    //Render product - product page layout\r\n    renderProduct(product);\r\n}\r\n\r\nfunction showRatings(rating) {\r\n    //Check if rating is 5\r\n    if (rating > 4) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F5star.png?alt=media&token=0e7dfd68-9a75-44a2-b477-f2cce7fc328e\";\r\n    } else if(rating > 3) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F4star.png?alt=media&token=f49f353d-a4c2-4bbb-b52f-bf7c3b8ad795\";\r\n    } else if (rating > 2) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F3star.png?alt=media&token=bfe458d0-3bd8-48b1-a5c8-f4bc64198184\";\r\n    } else if (rating > 1) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F2star.png?alt=media&token=b0ed27fc-5c7b-4c16-9a49-fbd26011c043\";\r\n    } else if (rating > 0) {\r\n        stars = \"https://firebasestorage.googleapis.com/v0/b/web-charlotte-shop.appspot.com/o/images%2F1star.png?alt=media&token=bcb5f492-8e45-4e5a-b739-502407478091\";\r\n    }\r\n}\r\n\r\nfunction renderProduct(product) {\r\n    //Paint images\r\n    productAssets.innerHTML = `\r\n        <div>\r\n        <img src=\"${product.images[0]}\" class=\"product__main\" id=\"mainImg\">\r\n        </div>`;\r\n\r\n    //Get rating image for each product\r\n    showRatings(product.rating);\r\n\r\n    //Paint information\r\n    productInfo.innerHTML = `\r\n        <h1 class=\"product__name\">${product.name}</h1>\r\n        <h2 class=\"product__color\">${product.color.name.toUpperCase()}</h2>\r\n        <h2 class=\"product__price\">${currencyFormat(product.price)}</h2>\r\n        <p class=\"product__description\">${product.description}</p>\r\n        <img src=\"${stars}\" class=\"product__rating\">\r\n        <button class=\"product__bag\">ADD TO BAG</button>`;\r\n\r\n    if (product.images.length > 1) {\r\n        createGallery(product.images);\r\n    }\r\n\r\n    //Add to bag button\r\n    const bagBtn = document.querySelector(\".product__bag\");\r\n\r\n    //Counter for number of times product is added, adding variable to items\r\n    let counter = 0;\r\n\r\n    bagBtn.addEventListener(\"click\", async (e) => {\r\n        const currentProductIsAdded = bag.find(productArray => productArray.id === product.id);\r\n\r\n        const productToAdd = {\r\n            ...product,\r\n            counter: (currentProductIsAdded) ? currentProductIsAdded.counter + 1 : 1,\r\n        }\r\n\r\n        if (currentProductIsAdded) {\r\n            const indexElement = bag.findIndex(product => product.id === product.id);\r\n            bag[indexElement] = productToAdd;\r\n        } else {\r\n            bag.push(productToAdd);\r\n        }\r\n \r\n        addProductToBag(bag);\r\n\r\n        if (userLogged) {\r\n            await createFirebaseBag(db, userLogged.uid, bag);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction createGallery(images) {\r\n    //Paint product gallery\r\n    const gallery = document.createElement(\"div\");\r\n    gallery.className = \"product__gallery\";\r\n\r\n    images.forEach(image => {\r\n        gallery.innerHTML += `<div><img src=\"${image}\"></div>`;\r\n    });\r\n\r\n    productAssets.appendChild(gallery);\r\n\r\n    //Switch main img  \r\n    const mainImage = document.getElementById(\"mainImg\");\r\n    const galleryImgs = document.querySelector(\".product__gallery\");\r\n\r\n    galleryImgs.addEventListener(\"click\", e => {\r\n        if (e.target.tagName === \"IMG\") {\r\n            mainImage.setAttribute(\"src\", e.target.currentSrc);\r\n\r\n        }\r\n    });\r\n}\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if (user) {\r\n      // User is signed in, see docs for a list of available properties\r\n      // https://firebase.google.com/docs/reference/js/firebase.User\r\n      userLogged = user;\r\n      bag = await getFirebaseBag(db, userLogged.uid);\r\n\r\n    } else {\r\n        bag = getMyLocalBag();\r\n    }\r\n\r\n    loadProduct();\r\n});\r\n\r\n","//Colors from products and their categories\r\nconst colors = [\r\n    {\r\n        category: \"face\",\r\n        palette: [\r\n            {\r\n                name: \"None\",\r\n                hex: \"#ffffff\"\r\n            },\r\n            {\r\n                name: \"1 Cool\",\r\n                hex: \"#f4cfb5\"\r\n            },\r\n            {\r\n                name: \"4 Warm\",\r\n                hex: \"#ecbd8f\"\r\n            },\r\n            {\r\n                name: \"7 Neutral\",\r\n                hex: \"#cd9369\"\r\n            },\r\n            {\r\n                name: \"9 Cool\",\r\n                hex: \"#ca864f\"\r\n            },\r\n            {\r\n                name: \"12.5 Warm\",\r\n                hex: \"#ac6c40\"\r\n            },\r\n            {\r\n                name: \"15 Neutral\",\r\n                hex: \"#754626\"\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        category: \"cheek\",\r\n        palette: [\r\n            {\r\n                name: \"Romance light\",\r\n                hex: \"#c4867c\"\r\n            },\r\n            {\r\n                name: \"Medium bronze\",\r\n                hex: \"#ca906a\"\r\n            },\r\n            {\r\n                name: \"Tan bronze\",\r\n                hex: \"#bc7a51\"\r\n            },\r\n            {\r\n                name: \"Peachgasm\",\r\n                hex: \"#f58e7e\"\r\n            },\r\n            {\r\n                name: \"Pinkgasm\",\r\n                hex: \"#ed7d7e\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"eyes\",\r\n        palette: [\r\n            {\r\n                name: \"Super Black\",\r\n                hex: \"#090909\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dd8d8a\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk Dreams\",\r\n                hex: \"#82362b\"\r\n            },\r\n            {\r\n                name: \"The Sophisticate\",\r\n                hex: \"#ba8973\"\r\n            },\r\n            {\r\n                name: \"Copper Charge\",\r\n                hex: \"#c26f59\"\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        category: \"lips\",\r\n        palette: [\r\n            {\r\n                name: \"Scarlet Spell\",\r\n                hex: \"#8b2833\"\r\n            },\r\n            {\r\n                name: \"Pillow Talk\",\r\n                hex: \"#dc7b77\"\r\n            },\r\n            {\r\n                name: \"Lost Cherry\",\r\n                hex: \"#fd5d5f\"\r\n            },\r\n            {\r\n                name: \"Love Liberty\",\r\n                hex: \"#aa2937\"\r\n            },\r\n            {\r\n                name: \"Gold\",\r\n                hex: \"#dc7e53\"\r\n            }\r\n        ],\r\n    }\r\n];\r\n\r\nasync function addProductToBag(bag) {\r\n    localStorage.setItem(\"bag\", JSON.stringify(bag));\r\n};\r\n\r\nfunction getMyLocalBag() {\r\n    const myBag = localStorage.getItem(\"bag\");\r\n    return myBag ? JSON.parse(myBag) : [];\r\n}\r\n\r\nfunction deleteMyLocalBag() {\r\n    window.localStorage.removeItem('bag');\r\n}\r\n\r\nfunction currencyFormat(price) {\r\n    return new Intl.NumberFormat(\"en-UK\", {\r\n        style: 'currency',\r\n        currency: 'EUR',\r\n        minimumFractionDigits: 0\r\n    }).format(price);\r\n}\r\n\r\nexport {\r\n    addProductToBag, \r\n    getMyLocalBag,\r\n    deleteMyLocalBag,\r\n    currencyFormat,\r\n    colors\r\n}"],"names":["$6QD2Y","parcelRequire","$e9cce34b3ffde865$var$productInfo","document","getElementById","$e9cce34b3ffde865$var$productAssets","$e9cce34b3ffde865$var$userLogged","$e9cce34b3ffde865$var$bag","async","$e9cce34b3ffde865$var$loadProduct","productId","param","url","window","location","search","URLSearchParams","get","$e9cce34b3ffde865$var$getParam","product1","innerHTML","images","rating","stars","name","color","toUpperCase","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","$d8be5cb91089582e$export$4670d0ed237a9270","description","length","gallery","createElement","className","forEach","image","appendChild","mainImage","querySelector","addEventListener","e","target","tagName","setAttribute","currentSrc","$e9cce34b3ffde865$var$createGallery","bagBtn","currentProductIsAdded","find","productArray","id","productToAdd","counter","indexElement","findIndex","product","push","bag","localStorage","setItem","JSON","stringify","$d8be5cb91089582e$export$c905b8db0449b9bb","$ba58U","createFirebaseBag","db","uid","$e9cce34b3ffde865$var$renderProduct","$5nbHs","getSingleProduct","myBag","getItem","parse"],"version":3,"file":"product.bf983fc4.js.map"}